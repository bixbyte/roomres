function loadResidenceLists(e){$.post("residences.php",{},function(t){var s="";for(item in t)s+='<option value="'+t[item].id+'" > '+t[item].name+" </option>";$("#"+e).html(s)})}function residenceManagement(){$(function(){window.location="#system_options",sysOpt.html('<p> <button class="btn btn-success perspective" onclick="resAdd()">Add Residence</button>  &nbsp; <button class="btn btn-success perspective disabled" onclick="resList()">Residence Occupant Lists</button>  &nbsp; <button class="btn btn-success perspective disabled"  onclick="resMan()"> Residence Management </button> </p>')})}function resAdd(){$(function(){sysOpt.html('<strong class="text-success" > Residence Addition</strong><br><div style="" ><input type="text" id="resAddName" class="mbtn"  style="border:1px solid gray; color: green;" placeholder="Residence Name"> &nbsp;<select id="resAddGender" class=" mbtn " style="color: gray; font-weight: normal;"><option value="m" selected>Male</option><option value="f">Female</option><option value="a">Either</option></select>&nbsp;<button id="addRes" class="btn btn-success" style="color: white;"> Add Residence </button></div>'),$("#addRes").on("click",function(){var e=$("#resAddGender").val(),t=$("#resAddName").val();t.length<4?$("#resAddName").focus():($("#addRes").addClass(" disabled "),$.post("proc_adds.php",{act:"new_residence",gender:e,name:t},function(e){sysOpt.html(e)}))})})}function resList(){}function resMan(){}function roomManagement(){$(function(){window.location="#system_options",sysOpt.html('<p> <button class="btn btn-primary perspective"  onclick="roomAdd()">Add Rooms</button>   &nbsp; <button class="btn btn-primary perspective" onclick="roomAvail()">Manage room Availability</button>  &nbsp; <button class="btn btn-primary perspective" onclick="roomUnAvail()">Specially Reserved Rooms</button>  </p>')})}function reservantManagement(){$(function(){window.location="#system_options",sysOpt.html('<p><button class="btn btn-danger perspective"  onclick="occuReset()">Reservation Reset</button>   &nbsp; <button class="btn btn-danger perspective" onclick="occuSearch()">Comprehensive search</button> &nbsp; <button class="btn btn-danger perspective" onclick="occuSearch2()">Reservant Search</button>  &nbsp; <button class="btn btn-danger perspective" onclick="occuFin()">Deactivate User Account</button> </p> ')})}function systemConfiguration(){$(function(){window.location="#system_options",sysOpt.html('<p> <button class="btn btn-warning perspective"  onclick="sysBackup()">System Backup</button>   &nbsp; <button class="btn btn-warning perspective disabled"  onclick="sysRestore()">System Restore</button>   &nbsp; <button class="btn btn-warning perspective"  onclick="sysClear()">Clear Old Backup</button>   &nbsp; <button class="btn btn-warning perspective"  onclick="sysEnable()">Enable Reservation</button>   &nbsp; <button class="btn btn-warning perspective"  onclick="sysDisable()">Disable Reservation</button>  </p>')})}function roomAdd(){$(function(){sysOpt.html('<strong style="color: #37BC9B;" >Room Addition</strong><br><div><input type="text" class="mbtn" placeholder="First Room" id="roomAddfroom"> &nbsp;<input type="text" class="mbtn" placeholder="nth room" id="roomAddlroom"><br><br><input type="text" class="mbtn" placeholder="Room Capacity" id="roomAddcapacity">&nbsp;<select id="roomAddresidence" class="mbtn" style="text-transform: uppercase;"></select><br><br><button class="btn " style="color:white; background: #37BC9B;" id="addRoom"> Add Room(s) </button></div>'),loadResidenceLists("roomAddresidence"),$("#addRoom").on("click",function(){var e=$("#roomAddfroom"),t=$("#roomAddlroom"),s=$("#roomAddcapacity"),o=$("#roomAddresidence");e.val().length>0&&!isNaN(e.val())?s.val().length>0&&!isNaN(s.val())?""!=o.val()&&void 0!=o.val()?(0!=t.val().length&&(isNaN(t.val())||parseInt(t.val())<parseInt(e.val()))&&t.val(""),$("#addRoom").addClass("disabled"),$.post("proc_adds.php",{act:"new_room",room_start:e.val(),room_end:t.val(),room_capacity:s.val(),residence:o.val()},function(e){sysOpt.html(e)})):o.focus():s.focus():e.focus()})})}function roomAvail(){loadResidenceLists("reserveResidence"),$("#system_options").html('<strong style="color: #37BC9B;">Special Room Reservation</strong><br><div><input type="text" class="mbtn" placeholder="First Room" id="room_start"> &nbsp;<input type="text" class="mbtn" placeholder="nth room" id="room_end"><br><br><select id="reserveResidence" class="mbtn" style="text-transform: uppercase;"></select><br><br><button class="btn" style="background: #37BC9B; color: white;" id="specialReserve"> Reserve Room(s)</button></div>'),$("#specialReserve").on("click",function(){var e=$("#reserveResidence"),t=$("#room_start"),s=$("#room_end");t.val().length>0?(parseInt(t.val())>parseInt(s.val())&&s.val(""),$.post("proc_adds.php",{act:"new_room_reserve",residence:e.val(),room_start:t.val(),room_end:s.val()},function(e){sysOpt.html(e)})):t.focus()})}function roomUnAvail(){$(function(){$.post("room_unavailable.php",function(e,t,s){if("text/html"===s.getResponseHeader("Content-Type"))sysOpt.html(e);else{rooms=e.rooms,reslist=e.residences,$ress='<strong style="color: #37BC9B;">Specially Reserved Rooms</strong><br>';for(room in rooms)$ress+='<div class="panel panel-primary col col-lg-6" ><input type="text" class="mbtn bg-primary col-lg-4" disabled style="" value="'+rooms[room].r_number+'" > <input type="text" class="mbtn bg-danger col-lg-4" disabled title="'+reslist[rooms[room].residence]+'" value="'+reslist[rooms[room].residence]+'" ><button class="btn btn-warning perspective col-lg-4" style=" " onclick="makeAvailable( '+rooms[room].r_number+", "+rooms[room].residence+' )" > Make Available </button></div>';sysOpt.html($ress)}})})}function makeAvailable(e,t){$.post("proc_adds.php",{act:"new_room_reserve",room_start_1:e,residence_1:t},function(e){sysOpt.html(e),setTimeout(function(){roomUnAvail()},5e3)})}function occuReset(){sysOpt.html('<strong style="color: #E5553E;">Reservation Reset</strong><br><div><input type="text" class="mbtn" placeholder="ID Number/Reset Command" id="id_number"> &nbsp;<button class="btn" style="background: #E5553E; color: white;" id="occuReset"> Reset Reservation</button></div>'),$("#occuReset").on("click",function(){$.post("proc_adds.php",{act:"clear_room",id_number:$("#id_number").val()},function(e){sysOpt.html(e)})})}function occuSearch(){sysOpt.html('<strong style="color: #37BC9B;">Comprehensive Resident Search</strong><br><div><input type="text" class="mbtn" placeholder="ID Number/ Resident Name" id="occuSearch"><br/><br><div id="occuSearchRes" style="background-color:#E8E9EE; width:100%;"></div></div>'),$("#occuSearch").keyup(function(){$("#occuSearchRes").html('<br><center><code>Loading Comprehensive List of Active residents</code></center><div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>'),text=$("#occuSearch").val(),work("/roomres/proc_adds.php?act=5346)7454dm1_pro&stringy="+text,$("#occuSearchRes"))})}function occuSearch2(){sysOpt.html('<strong style="color: #37BC9B;">Confirmed Resident Search</strong><br><div><input type="text" class="mbtn" placeholder="ID Number/ Resident Name" id="occuSearch2"><br/><br><div id="occuSearchRes2" style="background-color:#E8E9EE; width:100%;"></div></div>'),$("#occuSearch2").keyup(function(){$("#occuSearchRes2").html('<br><center><code>Loading Comprehensive List of Active residents</code></center><div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>'),text=$("#occuSearch2").val(),work("/roomres/proc_adds.php?act=5346)7454dm1_basic_pro&stringy="+text,$("#occuSearchRes2"))})}function occuFin(){sysOpt.html('<strong style="color: #E9573F;">User Account Deactivation</strong><br><div><input type="text" class="mbtn" placeholder="ID Number,ID Number2, ..." id="username"> &nbsp;<button class="btn" style="background: #E9573F; color: white;" id="occuFin"> Deactivate Account</button> </div>');var e=function(){text=$("#username").val(),$.post("proc_adds.php",{act:"detonate",username:text},function(e){sysOpt.html(e)})};$("#occuFin").on("click",e)}function work(e,t){var s="undefined"==typeof s?new Worker("assets/js/resListWorker.js"):s;s.addEventListener("message",function(e){t.html(e.data),s.terminate()},!1),s.postMessage(e)}sysOpt=$("#system_options");